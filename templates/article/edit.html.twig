{% extends 'base.html.twig' %}

{% block title %}Édition d'un article{% endblock %}

{% block body %}



    <div class="page-container container col-md-8">

        <h1 class="text-center mb-5">Édition d'un article</h1>



        
        {{ form_start(form) }}

            <div class="mb-5">{{form_row(form.title)}}</div>

            <div class="mb-5">{{form_row(form.content, {'attr': {'class': 'tinymce'}})}}</div>

            <div class="mb-5">{{form_row(form.thumbnailFile)}}</div>

            <div class="">

                <a href="{{path("homepage")}}"><button type="button" class="btn btn-go-back btn-lg mb-3 me-3">❌ Retour</button></a>

                <button type="submit" class="btn btn-validate btn-lg mb-3">✔️ Valider</button>
            
            </div>

        {{ form_end(form) }}
    
    </div>

    <script src="https://cdn.tiny.cloud/1/ozugcg6rtcsvf9xx1qfujj2aluoo7ezwd2pfx5xnwf4nhujq/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>


   

    <!-- CDN - TinyMCE Rich Text Editor -->

    <script>

            /*

                Loading scripts after page load?
                Thanks to : https://stackoverflow.com/questions/19737031/loading-scripts-after-page-load/19737127
            
            */

            /* WARNING : IT SEEMS THAT DOCUMENT.READY MESS THINGS UP !!! */

            $.getScript(

                "https://cdn.tiny.cloud/1/ozugcg6rtcsvf9xx1qfujj2aluoo7ezwd2pfx5xnwf4nhujq/tinymce/6/tinymce.min.js",

                () => console.log('loaded script!')

            ).done((script,textStatus ) => {

                // TinyMCE Rich Text Editor Init

                let editorChangeHandlerId;

            tinymce.init({

                    mode : "specific_textareas",
                    selector: 'textarea.tinymce',
                    plugins: 'emoticons lists',
                    toolbar: 'undo redo emoticons bullist bold italic underline alignleft aligncenter alignright alignjustify outdent indent',
                    browser_spellcheck: true,
                    width : "100%",
                    height: "500px",
                    entity_encoding : "raw",
                    menubar: 'edit format',

                    menu: {

                        edit: { title: 'Edit', items: 'undo redo | cut copy paste | selectall | searchreplace' },

                        format: { title: 'Format', items: 'bold italic underline strikethrough superscript subscript codeformat removeformat' },

                    }, 

                    language: 'fr_FR',
                    plugins: "emoticons, lists",
                    content_style: "body {padding: 0px 15px;}",
                    nowrap : false,

                        setup: function(editor) {

                        editor.on('change keyup', function () {

                            

                        });

                    },

                });
                
                }).fail(( jqxhr, settings, exception ) => {
                    console.log(exception + ': ' + jqxhr.status);
                }

            );

    </script>


    <style>
        
    </style>

{% endblock %}
