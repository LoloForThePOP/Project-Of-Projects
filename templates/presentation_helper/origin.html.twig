{% extends 'base.html.twig' %}

{% block headTag %}<meta name="robots" content="noindex,nofollow" />{% endblock %}

{% block title %}Aide √† la pr√©sentation de projet{% endblock %}


{# "priorQuestion" is a prior question user can answer with yes or no, so that a form appears or not with an actual Question (questionFr) 
    "finalRenderingLabel" is the label that will be integrated on consultation page, if relevant.
#}

{% set helperItems = [ 
            
    { 'uniqueName': "goal_details", 'type': "textDescription", 'questionFr': "D√©crivez votre projet en quelques lignes", 'finalRenderingLabel': ""},

    { 'uniqueName': "title", 'type': "title", 'priorQuestion': "‚úíÔ∏è Votre Projet a t-il d√©j√† un titre ou un titre temporaire ?", 'questionFr': "Quel est le titre du Projet ?",'finalRenderingLabel': ""}, 

    { 'uniqueName': "progress", 'type': "qa", 'priorQuestion': "üèóÔ∏è Votre Projet a t-il d√©j√† avanc√© ?", 'questionFr': "Quel est le travail d√©j√† effectu√© ?", 'finalRenderingLabel': "Quel est l'avancement du Projet ?"},

    { 'uniqueName': "websites", 'type': "websites", 'priorQuestion': "", 'questionFr': "üåê Si vous avez d√©j√† un site web ou un r√©seau social en lien avec votre Projet", 'repeatableMessage': 'Voulez-vous ajouter un autre site web ?', 'finalRenderingLabel': ""},

    { 'uniqueName': "places", 'type': "places", 'priorQuestion': "üåç Votre Projet est-il reli√© √† un pays, un d√©partement, ou une ville ?", 'questionFr': "", 'finalRenderingLabel': ""},
    
    { 'uniqueName': "needs", 'type': "needs", 'priorQuestion': "üôÉ Souhaitez-vous de l'aide ?", 'questionFr': "", 'repeatableMessage': 'Voulez-vous ajouter un autre besoin ?', 'finalRenderingLabel': ""}, 
    
    { 'uniqueName': "logo", 'type': "logo", 'priorQuestion': "üçã Avez-vous d√©j√† un logo pour votre projet ?", 'questionFr': "",'finalRenderingLabel': ""}, 

    { 'uniqueName': "imageSlide", 'type': "imageSlide", 'priorQuestion': "üñºÔ∏è Avez-vous une image ou une photo pour illustrer votre projet ?", 'questionFr': "",'finalRenderingLabel': "", 'repeatableMessage': 'Voulez-vous ajouter une autre image ?'},
    
    { 'uniqueName': "categories_keywords", 'type': "categories_keywords", 'questionFr': "Derni√®re √©tape ! Facilitez la d√©couverte de votre Projet üòç"},

] %}

{# For another form...

    { 'uniqueName': "idea", 'type': "qa", 'questionFr': "Comment est n√©e l'id√©e du projet ?", 'finalRenderingLabel': "Comment est n√©e l'id√©e du projet ?"}, 
#}


{% set currentItem = helperItems[position] %}

{% set uniqueName = currentItem.uniqueName %}

{% set currentPosition = position %}

{% set nextPosition = null %}

{% set itemsCount = helperItems | length %}

{% set progressionPercentage = ( (currentPosition + 1) / itemsCount ) * 100 %}

{% if helperItems[position + 1] is defined %}

    {% set nextPosition = position + 1 %}

{% endif %}

{% set nextItem = null %}

    {% if helperItems[position + 1] is defined %}

        {% set nextItem = helperItems[position + 1] %}

    {% endif %}

{% set previousPosition = null %}

    {% if helperItems[position - 1] is defined %}

        {% set previousPosition = position - 1 %}

    {% endif %}


{% block body %}

<div  id="createPPModal" class="modal" tabindex="-1" aria-hidden="true">

    <div class="modal-dialog modal-fullscreen">

        <div class="modal-content">
            
            <div class="box-header">
            
                <div>

                    <a class="ms-5 me-3" href="/">

                        <img class="website-logo" src="/media/static/images/propon_logo.svg" alt="website logo" loading="lazy"/>

                    </a>

                    <span class="box-title">
                    
                        Ajouter un Projet

                    </span>       
                
                
                </div>

                <a href="{{path ('homepage')}}">
                
                    <button type="button" class="btn btn-outline-dark" >Quitter</button>
                
                </a>

                

        <style>
        
            .box-header{
                
                display: flex;
                align-items: center;
                justify-content: space-evenly;

                height: 74px;

                margin-bottom: 50px;
                background-color: white;
            
            
            }

            .website-logo{
                width: 135px;
            }


            .box-title{
                font-size: 15px;
                color: #094171;
            }
        
        </style>
            
            </div>


            <div class="box-content">
        

                        
                    <div class="form-container form" data-track-view='{"key":"pres-help-step-{{ currentPosition }}", "attributes":{"uniqueName": "{{uniqueName}}"} }'>

                        {% include "presentation_helper/_form.html.twig" %}

                    </div>
            
            
            </div>        
        </div>






    </div>
</div>


        
    

    


    <style>

        {# Background colors for large screens #}

         @media screen and (min-width: 580px) {

            #createPPModal .modal-content{


                background-color: #fff6e4;


            }

            .box-content{

                display: flex;
                justify-content: center;
            }


             

            .form-container{

                width: 1000px;

                padding: 50px;
                min-height: unset;

                border-radius: 15px;
                background-color: white;

            }

         }

          

        @media screen and (max-width: 580px) {

            #createPPModal{

                padding-left: 0px;
                padding-right: 0px;
                padding-top: 40px;

            }

            .fs-4{
                font-size: 19px !important;
            }

            .sm-fs-4{
                font-size: 16px;
            }

        }

    </style>

    <script>

        $(document).ready(function(){

            // Giving focus to appropriate input

            function giveFocus(){

                var itemType = $('#presentation_helper_helperItemType').val();
                var relatedInputId;

                switch(itemType) {

                    case 'title':
                        relatedInputId = 'presentation_helper_title';
                        break;
                        
                    case 'qa':
                    case 'textDescription':
                    
                        relatedInputId = 'presentation_helper_answer';
                        break;
                        
                    case 'websites':
                        relatedInputId = 'presentation_helper_url';
                        break;
                        
                    case 'needs':
                        relatedInputId = 'presentation_helper_needTitle';
                        break;
                      
                    default:
                        document.getElementById('autocomplete').focus();  // it is an isolated case, see _form.html.twig
                } 

                $("#"+relatedInputId).focus();
            }

        });

    </script>


    <script>
            document.addEventListener('DOMContentLoaded', () => {
            const autoModalEl = document.getElementById('createPPModal');
            const autoModal = new bootstrap.Modal(autoModalEl, {
                backdrop: 'static', // optionnel : emp√™cher la fermeture en cliquant dehors
                keyboard: true
            });
            autoModal.show();
            });
</script>

{% endblock %}
