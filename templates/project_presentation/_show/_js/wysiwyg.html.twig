<script>
    
    // this script should be called only for user presenters
    
    // hiding or showing items : see wysisyg.css and a few declaration in project_presentation_page.css
    
    $(document).ready(function(){

        $(".pp-container").addClass("in-edition-mode");

        // make delete item icons appear when clicking on a trash icon        
    
        $(".show-delete-items-buttons").click(function() {

            var scope = $(this).closest('.pp-struct-container').find('.delete-button');

            if ($(this).hasClass("inactivated")){

                scope.css('visibility', 'visible').css('opacity', '1');

            }

            else {

                scope.css('visibility', 'hidden').css('opacity', '0');

            }

            $(this).toggleClass("inactivated activated");
            
        });

        // switching between edition mode and consultation mode
            
        $( "#pp-switch-edit-consult-mode" ).click(function() {

            if($(this).hasClass("edition-mode")){

                // entering consultation mode

                //disabling sortable capabilities
                $('.js-elements-list').sortable('disabled', true);

            }

            else{

                //entering edition mode

                //enabling sortable capabilities
                $('.js-elements-list').sortable('disabled', false);

            }

            // toggling switch button status

            $(this).toggleClass("edition-mode consultation-mode");

            // toggling whole container status

            $(".pp-container").toggleClass("in-edition-mode in-consultation-mode");
        
        });


        // switching between edition mode and consultation mode
        
        $( ".js-show-info-box" ).click(function() {

            var context = $(this).data('help-context');

            $('#global_modal .modal-body').html('<div class="loader text-center"></div>');



            $.ajax({  

                url: "{{path('ajax_contextual_help')}}",
                type:       'POST',   
                dataType:   'json',
                data: {
                   "context": context,
                },

                async: true,  
                
                success: function(data, status) {

                    //alert(data.html);

                    $('#global_modal .modal-body').html(data.html);
                         
                },  

                error : function(xhr, textStatus, errorThrown) {  
                    // alert('Ajax request failed.');  
                }  
             }); 

        });

    });

</script>