
{% embed "/project_presentation/_show/structure_content_skeleton.html.twig" with {'iconName': "news", 'title': "ActualitÃ©s",} %}

    {% block editButtons %}{% endblock %}

    {% block deleteElementsButtons %}

        {% if countNews > 0 %}
        
            {{ parent() }}
        
        {% endif %}

    {% endblock %}

    {% block mainContent %}


        <div id="news" class="">

            {% set textShowMoreThreshold = 95 %}

                {% if countNews > 0 %}

                    <link href="/css/news_card.css" rel="stylesheet">
                
                    {% for news in presentation.news | reverse %}

                        {% set newsTextContent = news.textContent %}

                            {% include "project_presentation/_show/_news_card.html.twig" %}

                    {% endfor %}  
                            
                    {# News slider controls #}

                    <div class="newsSliderControls">

                        <a class="item" onclick="plusSlidesNews(-1)">&#10094;</a>
                        <a class="item" onclick="plusSlidesNews(1)">&#10095;</a>
                    
                    </div>

                    
                    {# News slider script #}
                    <script>
                        
                        let slideIndexNews = 1;

                        $(document).ready(function(){

                            showSlidesNews(slideIndexNews);

                        });

                        // Next/previous controls
                        function plusSlidesNews(n) {
                        showSlidesNews(slideIndexNews += n);
                        }

                        function showSlidesNews(n) {
                        let i;
                        let slides = document.getElementsByClassName("news-card");
                        
                        if (n > slides.length) {slideIndexNews = 1}
                        if (n < 1) {slideIndexNews = slides.length}
                        for (i = 0; i < slides.length; i++) {
                            slides[i].style.display = "none";
                        }
                        slides[slideIndexNews-1].style.display = "block";
                        } 
                        
                        
                    </script>

                    <style>
                    
                        .newsSliderControls{
                            display: flex;
                            justify-content: space-between;
                            width: 100%;
                            position: absolute;
                            top: 50%;
                        }


                        .newsSliderControls .item{

                            display: inline-block;
                            width: 40px;
                            height: 40px;
                            line-height: 40px;
                            text-align: center;
                            font-size: 20px;
                            border-radius: 50%;
                            background-color: dodgerblue;
                            color: white;
                            text-decoration: none;
                            outline: none;

                            cursor: pointer;
                        }

                        @media screen and (max-width: 580px) {

                            .newsSliderControls{

                                display: none;

                            }
                        
                        }
                    
                    </style>

                {% else %} {# Only one news, we do not use a slider #}

                    {% for news in presentation.news | reverse %}

                        {% set newsTextContent = news.textContent %}
                
                        {% include "project_presentation/_show/_news_card.html.twig" %}

                    {% endfor %}

                {% endif %}


            {# Show more news text content #}

            <script>

                $(document).ready(function(){

                    $('.show-more span').on('click', function(e){
                        e.preventDefault();
                        var $this = $(this); 
                        var $content = $this.closest('.news-card').find('.text-content');
                        $content.removeClass("hideContent").addClass("showContent");
                        $(this).parent().hide();
                        

                    });

                })
            </script>

        </div>

        <style>
        
            #news{
                position: relative;
            }
        
        </style>

    {% endblock %}

{% endembed %}