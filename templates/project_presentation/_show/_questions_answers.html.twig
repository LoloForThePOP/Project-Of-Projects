{% embed "/project_presentation/_show/structure_content_skeleton.html.twig" with {'iconName': "questionsAnswers", 'title': "Questions & RÃ©ponses",} %}

    {% block editButtons %}

        {# Add question & answer button (triggers a modal) #}

        <button data-bs-toggle="modal" data-bs-target="#add_qa_form_modal" class="pp-edition-mode btn btn-light btn-sm me-3">+</button>

    {% endblock %} 


    {% block mainContent %}

        {% set qas = presentation.getOC('questionsAnswers') %}

        <div id="questionsAnswers" class="js-elements-list pp-struct-content">

            {% for qa in qas %}

                <!-- Question Display (with Collapse Symbol) -->

                <div 
                
                    id="{{qa.id}}" 
                    
                    class="js-sortable-element questionRow  position-relative mb-2 row collapsed" 
                    
                    data-bs-toggle="collapse" 
                    
                    href="#collapse-answer-{{ qa.id }}" 
                    
                    role="button" 
                    
                    aria-expanded="false" 
                    
                    aria-controls="collapse-answer-{{ qa.id }}"
                
                >
                      
                        <!-- Question -->

                        <div class="col-11">
                            
                            <span data-edit='{"entity": "PPBase", "id": {{presentation.id}},  "property": "questionsAnswers", "subid": "{{qa.id}}", "subproperty":"question" }' class="question">{{ qa.question [:1] | upper ~ qa.question [1:] }}</span>
                        
                        </div>

                        <!-- Collapse Symbol -->

                        <div class="collapseSymbolDisplay col-1"></div>

                        {% if userPresenter %}

                            {# delete q&a button (Red Cross) #}
                            {# overriding width and height due to css bs row behaviour #}

                            <button type="button" data-elements-type="questionsAnswers" data-id="{{qa.id}}" class="js-delete-element delete-button pp-edition-mode btn" style="width:30px; height:30px;">&times</button>

                        {% endif %}

                </div>

                
                <!-- Answer Display (+ edit button for presenters)-->

                <div id="collapse-answer-{{ qa.id }}" class="answer-container collapse no-transition">
                    
                    <div data-edit='{"entity": "PPBase", "id": {{presentation.id}}, "property": "questionsAnswers", "subid": "{{qa.id}}", "subproperty":"answer" }' class="answer">{{ qa.answer [:1] | upper }}{{ qa.answer [1:] | sanitize_html ('newlines')}}</div>
                
                </div>

                <hr class="qa-separator">

            {% endfor %}

        </div>

        <style>
   
            .questionRow {
                margin-bottom: 28px;
            }
            
            .questionRow:hover {
                background-color: #f5f5ff;
            }
        
            .question {
                
                width: 100%;

                border-left: 3px solid #bebef8;
                padding-left: 8px;
        
                font-size: 1.25em;
                line-height: 1.15em;

                font-family: Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        
            } 

            .answer-container{

                padding: 20px 40px 15px 30px;
            }
        
            .answer {

                width: 100%;
        
                font-size: 1.18em;
                line-height: 1.5em;

                font-family: Georgia, 'Times New Roman', Times, serif;
        
            }

                    
            #questionsAnswers .col-11{
                width: 89%;
                padding-right : 0;
            }

        
            .questionRow .collapseSymbolDisplay:after {
        
                font-size: 1.2rem !important;
                content: url('data:image/svg+xml;charset=UTF-8, <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/></svg>');
            }
        
            .collapsed .collapseSymbolDisplay:after {
                content: url('data:image/svg+xml;charset=UTF-8, <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');
            }

            #questionsAnswers .qa-separator:last-child{
                display:none;
            }

            #questionsAnswers .edit-link{
                padding: 5px 10px;
                border-radius: 2px;
            }

            #questionsAnswers .edit-link:hover{
                background-color: #dbe2ff;
            }
            
    
            @media screen and (max-width: 580px) {

                    
                #questionsAnswers .col-11{
                    width: 90%; /* reduced to prevent arrow overflow on mobile */
                    padding-right : 0;
                }

                #questionsAnswers .col-1 {
                    padding: 0;
                    width: 7%;
                    padding-top: 3px;
                }
    
                .question{
        
                    font-size:16px;
                    line-height:20px;
                    padding-left: 5px;
        
                }

                .answer-container{

                    padding: 10px 20px 8px 20px;
                }
        
                .answer{
        
                    font-size: 16px;
                    line-height: 1.5em;
        
                }
    
                .questionRow .collapseSymbolDisplay:after {
        
                    font-size: 1rem !important;
    
                }

                .collapseSymbolDisplay{
                    
                    display: flex;
                    justify-content: center;
                }        
            }
        
        </style>
        
    {% endblock %}
    
{% endembed %}