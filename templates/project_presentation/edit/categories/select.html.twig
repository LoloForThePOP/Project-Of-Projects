
{% embed "project_presentation/edit/manage_component_skeleton.html.twig" %}

{% block title %}Catégories du Projet{% endblock %}


{% block mainContentTitle %}Catégories du Projet{% endblock %}


    {% block moreInfoButtonLabel %}
    
        Conseils
    
    {% endblock %}

    {% block moreInfoContent %}
                            
        <ul class="h5">

            <li><strong>Choisissez des catégories</strong> pour que des visiteurs intéressés découvrent votre projet</li>

            <li>On peut <strong>combiner les catégories</strong></li>

            <li>Par exemple : Environnement <strong>ET</strong> Construction</li>

            <li>Maximum recommandé : 6</li>

            <li><strong>Compléter avec des mots-clés est efficace</strong></li>

            <li>Séparez les mots-clés <span>avec des virgules</span></li>

        </ul>

    {% endblock %}


{% block mainContent %}

    {# javascript inclusions #}

    {% include "project_presentation/edit/categories/_js_select.html.twig" %}


    <div id="cat-grid" class="col-xxl-10 clearfix">

        {% include "project_presentation/edit/categories/_list.html.twig" %}
    
    </div>


    <div class="">

        <h4 class="h3 fw-bold mb-3">Mots-clés</h4>

        <form class="mb-4" method="get">

            <input id="tagInput" class="me-2 mb-3" type="search" placeholder="Écrire ici" />

            <button id="tag-submit-button" class="btn btn-validate mb-3" type="submit" style="vertical-align: baseline !important;">Ajouter</button>

        </form>

        <div id="keywords-display">

            {% if presentation.keywords | length > 0 %}

                {% set keywords = presentation.keywords | split(',') %}

                {% for keyword in keywords %}
                    
                    <div class="keyword-wrapper">

                        {# left column contains text #}

                        <div class="left-col d-inline-block">{{keyword}}</div>

                        {# right column contains remove button #}

                        <div class="right-col d-inline-block">
                            <div class="remove-keyword">&times</div>
                        </div>

                    </div>

                {% endfor %}

            {% endif %}

        </div>

        <div id="keywords-string" class="d-none">{{presentation.keywords}}</div>

    </div>
    


    {% block specificStyles %}

        {% include "project_presentation/edit/categories/_css_select.html.twig" %}



    {% endblock %}
 

{% endblock %}



{% block specificJavascripts %}

    <script>
        
        $(document).ready(function(){

            // disabling symfony bootstrap 5 form theme

            $(".form-control").removeClass("form-control");

            $("#cat-grid .cat-button").on("click", function(event){ 

                var catId = $(this).attr('id');

                $(this).toggleClass("selectedCategory");

                $.ajax({  

                    url: "{{path('ajax_select_category', {'stringId': presentation.stringId}) }}",
                    type:       'POST',   
                    dataType:   'json',
                    data: {
                        "category-id": catId,
                    },
                    async:      true,  
                    
                    success: function(data, status) {  
                        // alert(data.catId)
                        
                    },  
                    error : function(xhr, textStatus, errorThrown) {  
                        // alert('Ajax request failed.');  
                    }  
                });  

            });  

        });  
    </script>

    
  

{% endblock %}

{% endembed %}