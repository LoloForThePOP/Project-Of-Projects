{% macro collection(title, items) %}

    <h3 class="collection-title">{{title}}</h3>

    <div class="collection-container">
            
        {% for item in items %}

        <a href="{{path('show_presentation', {'stringId': item.stringId})}}" class="text-decoration-none ">

            <div class="project-card">

                <div class="image-container d-flex justify-content-center align-items-center">

                    {% if item.cache.thumbnail is not empty %}

                        {# case thumbnail is stored locally #}

                        {% if not item.cache.thumbnail [0:4] is same as "http" %}

                            <img class="thumbnail" src="{{ item.cache.thumbnail | imagine_filter('standard_thumbnail_md') }}" alt="Presentation Thumbnail">

                        {% else %} {# case thumbnail is stored externaly (example : Youtube caption) #}

                            <img class="thumbnail" src="{{ item.cache.thumbnail }}" alt="Presentation Thumbnail">
                            
                        {% endif %}
            
                    {% else %} {# no cached thumbnail : default avatar #}

                        <div class="avatar-square-rounded avatar-80 mx-auto" style="background-color: {{ random (['#884394', '#3f51b5', '#009688', '#42a346', '#ff9800', '#2d66ba', '#a58f4f', '#129d90', '#428392', '#263b78', '#878273', '#705c20', '#d24040', '#c1944e']) }} !important;" >
                            
                            <span class="avatar-initial avatar-initial-80">

                            {{ item.goal | slice (0,1) | upper }}

                            </span>

                        </div>       

                    {% endif %}

                    
                </div>

                <div class="other-info-container">

                    <div class="goal {% if title is empty %}no-title{% endif %} ">
                        {{item.goal[:1] | upper ~ item.goal[1:] | slice(0, 77)}}{% if item.goal | length > 77 %}...{% endif %}
                    </div>

                    {% if title is not empty %}

                        <div class="title">
                            {{ item.title[:1] | upper ~ item.title[1:] | slice(0, 63)}}
                        </div>

                    {% endif %}

                    {% if item.keywords | length > 0 %}

                        <div class="keywords text-break">

                            {% set keywords = item.keywords | split(',') %}

                            {% for keyword in keywords [0:6] %}
                
                                #{{keyword | title | replace({" " : ""}) }}
                
                            {% endfor %}

                        </div>

                    {% endif %}

                </div>

            </div>

        </a>

        {% endfor %}

    </div>


{% endmacro %}
